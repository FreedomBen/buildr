<html>
  <head>
    <meta content='text/html;charset=UTF-8' http-equiv='Content-Type'>
    <title>buildr &mdash; Extending Buildr</title>
    <style type='text/css'>
      @import 'css/default.css';
      @import 'css/syntax.css';
    </style>
    <style media='print' type='text/css'>
      @import 'css/print.css';
    </style>
    <meta content='Official Buildr documentation from the people in the know' name='subject'>
    <link href='images/favicon.png' rel='shortcut icon'>
  </head>
  <body>
    <div id='wrap'>
      <div id='header'>
        <a href='http://buildr.apache.org/' title="Build like you code"><img alt='buildr' src='images/buildr.png'></a>
        <div class='tagline'>Build like you code</div>
      </div>
      <div id='pages'>
        <ol class='toc'>
          <li>Start Here
            <ol class="toc">
              <li><a href='index.html'>Welcome</a></li>
              <li><a href='quick_start.html'>Quick Start</a></li>
              <li><a href='installing.html'>Installing & Running</a></li>
              <li><a href='http://cwiki.apache.org/confluence/display/BUILDR/Index'>Community Wiki</a></li>
            </ol>
          </li>
          <li>Using Buildr
            <ol class="toc">
              <li><a href='buildr.pdf'>This Guide (PDF)</a></li>
              <li><a href='projects.html'>Projects</a></li>
              <li><a href='building.html'>Building</a></li>
              <li><a href='artifacts.html'>Artifacts</a></li>
              <li><a href='packaging.html'>Packaging</a></li>
              <li><a href='testing.html'>Testing</a></li>
              <li><a href='releasing.html'>Releasing</a></li>
              <li><a href='settings_profiles.html'>Settings/Profiles</a></li>
              <li><a href='languages.html'>Languages</a></li>
              <li><a href='more_stuff.html'>More Stuff</a></li>
              <li><a href='extending.html'>Extending Buildr</a></li>
              <li><a href='http://cwiki.apache.org/confluence/display/BUILDR/Buildr+HowTos'>How-Tos</a></li>
            </ol>
          </li>
          <li>Reference
            <ol class="toc">
              <li><a href='rdoc'>API</a></li>
              <li><a href='http://docs.rubyrake.org'>Rake</a></li>
              <li><a href='http://antwrap.rubyforge.org'>Antwrap</a></li>
              <li><a href='http://cwiki.apache.org/confluence/display/BUILDR/Common+Problems+and+Solutions'>Troubleshooting</a></li>
            </ol>
          </li>
          <li>Get Involved
            <ol class="toc">
              <li><a href='download.html'>Download</a></li>
              <li><a href='mailing_lists.html'>Mailing Lists</a></li>
              <li><a href='http://www.twitter.com/buildr'>Twitter</a></li>
              <li><a href='http://issues.apache.org/jira/browse/Buildr'>Issues/Bugs</a></li>
              <li><a href='https://builds.apache.org/view/A-F/view/Buildr'>CI Jobs</a></li>
              <li><a href='contributing.html'>Contributing</a></li>
            </ol>
          </li>
          <li>
            <form action='http://www.google.com/cse' id='searchbox_003673095760649043902:ogcgrzu0l2y'>
              <input name='cx' type='hidden' value='003673095760649043902:ogcgrzu0l2y'>
              <input name='cof' type='hidden' value='FORID:0'>
              <input name='q' size='20' type='text'>
              <input name='sa' type='submit' value='Search'>
              <img alt='Google Custom Search' src='http://www.google.com/coop/images/google_custom_search_smnar.gif'>
            </form>
          </li>
          <li>The Buildr Book
            <p><a href='http://www.amazon.com/Buildr/dp/1442160942/'><img src='images/1442160941-frontcover.jpg' style='width:120px'></a></p>
            <p>Based on the Buildr documentation, available from <a href='http://www.amazon.com/Buildr/dp/1442160942/'>Amazon</a> and
            <a href='http://www.createspace.com/3382199'>CreateSpace</a></p>
          </li>
        </ol>
      </div>
      <div id='content'>
        <h1 id='extending buildr'>Extending Buildr</h1>
        <ol class="toc"><li><a href="#tasks">Organizing Tasks</a></li><li><a href="#extensions">Creating Extensions</a></li><li><a href="#layouts">Using Alternative Layouts</a></li></ol>
        <h2 id="tasks">Organizing Tasks</h2>
<p>A couple of things we learned while working on Buildr.  Being able to write your own Rake tasks is a very powerful feature.  But if you find yourself doing the same thing over and over, you might also want to consider functions. They give you a lot more power and easy abstractions.</p>
<p>For example, we use OpenJPA in several projects.  It&#8217;s a very short task, but each time I have to go back to the OpenJPA documentation to figure out how to set the Ant MappingTool task, tell Ant how to define it.  After the second time, you&#8217;re recognizing a pattern and it&#8217;s just easier to write a function that does all that for you.</p>
<p>Compare this:</p>
<div class="highlight"><pre><code class="ruby"><span class="n">file</span><span class="p">(</span><span class="s1">&#39;derby.sql&#39;</span><span class="p">)</span> <span class="k">do</span>
  <span class="no">REQUIRES</span> <span class="o">=</span> <span class="o">[</span>
    <span class="s1">&#39;org.apache.openjpa:openjpa-all:jar:0.9.7-incubating&#39;</span><span class="p">,</span>
    <span class="s1">&#39;commons-collections:commons-collections:jar:3.1&#39;</span><span class="p">,</span>
    <span class="o">.</span> <span class="o">.</span> <span class="o">.</span>
    <span class="s1">&#39;net.sourceforge.serp:serp:jar:1.11.0&#39;</span> <span class="o">]</span>
  <span class="n">ant</span><span class="p">(</span><span class="s1">&#39;openjpa&#39;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">ant</span><span class="o">|</span>
    <span class="n">ant</span><span class="o">.</span><span class="n">taskdef</span> <span class="ss">:name</span><span class="o">=&gt;</span><span class="s1">&#39;mapping&#39;</span><span class="p">,</span>
      <span class="ss">:classname</span><span class="o">=&gt;</span><span class="s1">&#39;org.apache.openjpa.jdbc.ant.MappingToolTask&#39;</span><span class="p">,</span>
      <span class="ss">:classpath</span><span class="o">=&gt;</span><span class="no">REQUIRES</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="no">File</span><span class="o">::</span><span class="no">PATH_SEPARATOR</span><span class="p">)</span>
    <span class="n">ant</span><span class="o">.</span><span class="n">mapping</span> <span class="ss">:schemaAction</span><span class="o">=&gt;</span><span class="s1">&#39;build&#39;</span><span class="p">,</span> <span class="ss">:sqlFile</span><span class="o">=&gt;</span><span class="n">task</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
      <span class="ss">:ignoreErrors</span><span class="o">=&gt;</span><span class="kp">true</span> <span class="k">do</span>
        <span class="n">ant</span><span class="o">.</span><span class="n">config</span> <span class="ss">:propertiesFile</span><span class="o">=&gt;</span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;src/main/sql/derby.xml&#39;</span><span class="p">)</span>
        <span class="n">ant</span><span class="o">.</span><span class="n">classpath</span> <span class="ss">:path</span><span class="o">=&gt;</span><span class="n">projects</span><span class="p">(</span><span class="s1">&#39;store&#39;</span><span class="p">,</span> <span class="s1">&#39;utils&#39;</span> <span class="p">)</span><span class="o">.</span>
          <span class="n">flatten</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:to_s</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="no">File</span><span class="o">::</span><span class="no">PATH_SEPARATOR</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>
<p>To this:</p>
<div class="highlight"><pre><code class="ruby"><span class="n">file</span><span class="p">(</span><span class="s1">&#39;derby.sql&#39;</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">mapping_tool</span> <span class="ss">:action</span><span class="o">=&gt;</span><span class="s1">&#39;build&#39;</span><span class="p">,</span> <span class="ss">:sql</span><span class="o">=&gt;</span><span class="n">task</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
    <span class="ss">:properties</span><span class="o">=&gt;</span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;src/main/sql/derby.xml&#39;</span><span class="p">),</span>
    <span class="ss">:classpath</span><span class="o">=&gt;</span><span class="n">projects</span><span class="p">(</span><span class="s1">&#39;store&#39;</span><span class="p">,</span> <span class="s1">&#39;utils&#39;</span><span class="p">)</span>
<span class="k">end</span>
</code></pre>
</div>
<p>I prefer the second.  It&#8217;s easier to look at the Buildfile and understand what it does.  It&#8217;s easier to maintain when you only have to look at the important information.</p>
<p>But just using functions is not always enough.  You end up with a Buildfile containing a lot of code that clearly doesn&#8217;t belong there.  For starters, I recommend putting it in the <code>tasks</code> directory.  Write it into a file with a <code>.rake</code> extension and place that in the <code>tasks</code> directory next to the Buildfile.  Buildr will automatically pick it up and load it for you.</p>
<p>If you want to share these pre-canned definitions between projects, you have a few more options.  You can share the <code>tasks</code> directory using <span class="caps">SVN</span> externals, Git modules, or whichever cross-repository feature your source control system supports. Another mechanism with better version control is to package all these tasks, functions and modules into a <a href="http://rubygems.org/">Gem</a> and require it from your Buildfile.  You can run your own internal Gem server for that.</p>
<p>To summarize, there are several common ways to distribute extensions:</p>
<ul>
	<li>Put them in the same place (e.g. <code>~/.buildr</code>) and require them from your<br />
<code>buildfile</code></li>
	<li>Put them directly in the project, typically under the <code>tasks</code> directory.</li>
	<li>Put them in a shared code repository, and link to them from your project&#8217;s <code>tasks</code> directory</li>
	<li>As Ruby gems and specify which gems are used in the settings file</li>
</ul>
<p>You can also get creative and devise your own way to distribute extensions.<br />
<a href="http://errtheblog.com/post/6069">Sake</a> is a good example of such initiative that lets you deploy Rake tasks on a system-wide basis.</p>
<h2 id="extensions">Creating Extensions</h2>
<p>The basic mechanism for extending projects in Buildr are Ruby modules.  In fact, base features like compiling and testing are all developed in the form of modules, and then added to the core Project class.</p>
<p>A module defines instance methods that are then mixed into the project and become instance methods of the project.  There are two general ways for extending projects.  You can extend all projects by including the module in Project:</p>
<div class="highlight"><pre><code class="ruby"><span class="k">class</span> <span class="nc">Project</span>
  <span class="kp">include</span> <span class="no">MyExtension</span>
<span class="k">end</span>
</code></pre>
</div>
<p>You can also extend a given project instance and only that instance by extending it with the module:</p>
<div class="highlight"><pre><code class="ruby"><span class="n">define</span> <span class="s1">&#39;foo&#39;</span> <span class="k">do</span>
  <span class="kp">extend</span> <span class="no">MyExtension</span>
<span class="k">end</span>
</code></pre>
</div>
<p>Some extensions require tighter integration with the project, specifically for setting up tasks and properties, or for configuring tasks based on the project definition.  You can do that by adding callbacks to the process.</p>
<p>The easiest way to add callbacks is by incorporating the Extension module in your own extension, and using the various class methods to define callback behavior.</p>
<table>
	<tr>
		<th>Method        </th>
		<th>Usage </th>
	</tr>
	<tr>
		<td> <code>first_time</code>    </td>
		<td> This block will be called once for any particular extension.  You can use this to setup top-level and local tasks. </td>
	</tr>
	<tr>
		<td> <code>before_define</code> </td>
		<td> This block is called once for the project with the project instance, right before running the project definition.  You can use this to add tasks and set properties that will be used in the project definition. </td>
	</tr>
	<tr>
		<td> <code>after_define</code>  </td>
		<td> This block is called once for the project with the project instance, right after running the project definition.  You can use this to do any post-processing that depends on the project definition. </td>
	</tr>
</table>
<p>This example illustrates how to write a simple extension:</p>
<div class="highlight"><pre><code class="ruby"><span class="k">module</span> <span class="nn">LinesOfCode</span>

  <span class="kp">include</span> <span class="no">Extension</span>

  <span class="n">first_time</span> <span class="k">do</span>
    <span class="c1"># Define task not specific to any projet.</span>
    <span class="n">desc</span> <span class="s1">&#39;Count lines of code in current project&#39;</span>
    <span class="no">Project</span><span class="o">.</span><span class="n">local_task</span><span class="p">(</span><span class="s1">&#39;loc&#39;</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">before_define</span> <span class="k">do</span> <span class="o">|</span><span class="n">project</span><span class="o">|</span>
    <span class="c1"># Define the loc task for this particular project.</span>
    <span class="n">project</span><span class="o">.</span><span class="n">recursive_task</span> <span class="s1">&#39;loc&#39;</span> <span class="k">do</span> <span class="o">|</span><span class="n">task</span><span class="o">|</span>
      <span class="n">lines</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">prerequisites</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">path</span><span class="o">|</span>
        <span class="no">Dir</span><span class="o">[</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">path</span><span class="si">}</span><span class="s2">/**/*&quot;</span><span class="o">]</span>
      <span class="p">}</span><span class="o">.</span><span class="n">flatten</span><span class="o">.</span><span class="n">uniq</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">total</span><span class="p">,</span> <span class="n">file</span><span class="o">|</span>
        <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">total</span><span class="o">.</span><span class="n">nil?</span>
        <span class="k">if</span> <span class="no">File</span><span class="o">.</span><span class="n">file?</span> <span class="n">file</span> <span class="k">then</span>
          <span class="n">total</span> <span class="o">+</span> <span class="no">File</span><span class="o">.</span><span class="n">readlines</span><span class="p">(</span><span class="n">file</span><span class="p">)</span><span class="o">.</span><span class="n">count</span>
        <span class="k">end</span>
      <span class="p">}</span>
      <span class="nb">puts</span> <span class="s2">&quot;Project </span><span class="si">#{</span><span class="n">project</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> has </span><span class="si">#{</span><span class="n">lines</span><span class="si">}</span><span class="s2"> lines of code&quot;</span>
      <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">after_define</span> <span class="k">do</span> <span class="o">|</span><span class="n">project</span><span class="o">|</span>
    <span class="c1"># Now that we know all the source directories, add them.</span>
    <span class="n">task</span><span class="p">(</span><span class="s1">&#39;loc&#39;</span> <span class="o">=&gt;</span> <span class="n">project</span><span class="o">.</span><span class="n">compile</span><span class="o">.</span><span class="n">sources</span> <span class="o">+</span> <span class="n">project</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">sources</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="c1"># To use this method in your project:</span>
  <span class="c1"># loc path_1, path_2</span>
  <span class="k">def</span> <span class="nf">loc</span><span class="p">(</span><span class="o">*</span><span class="n">paths</span><span class="p">)</span>
    <span class="n">task</span><span class="p">(</span><span class="s1">&#39;loc&#39;</span> <span class="o">=&gt;</span> <span class="n">paths</span><span class="p">)</span>
  <span class="k">end</span>

<span class="k">end</span>

<span class="k">class</span> <span class="nc">Buildr</span><span class="o">::</span><span class="no">Project</span>
    <span class="kp">include</span> <span class="no">LinesOfCode</span>
<span class="k">end</span>
</code></pre>
</div>
<p>You may find interesting that this Extension <span class="caps">API</span> is used pervasively inside Buildr itself.  Many of the standard tasks such as <code>compile</code>, <code>test</code>, <code>package</code>  are extensions to a very small core.</p>
<p>Starting with Buildr 1.4, it&#8217;s possible to define ordering between <code>before_define</code> and <code>after_define</code> code blocks in a way similar to Rake&#8217;s dependencies.  For example, if you wanted to override <code>project.test.compile.from</code> in <code>after_define</code>, you could do so by in</p>
<div class="highlight"><pre><code class="ruby"><span class="n">after_define</span><span class="p">(</span><span class="ss">:functional_tests</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">project</span><span class="o">|</span>
  <span class="c1"># Change project.test.compile.from if it&#39;s not already pointing</span>
  <span class="c1"># to a location with Java sources</span>
  <span class="k">if</span> <span class="no">Dir</span><span class="o">[</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">project</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">compile</span><span class="o">.</span><span class="n">from</span><span class="si">}</span><span class="s2">/**/*.java&quot;</span><span class="o">].</span><span class="n">size</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span>
     <span class="no">Dir</span><span class="o">[</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">project</span><span class="o">.</span><span class="n">_</span><span class="p">(</span><span class="ss">:src</span><span class="p">,</span> <span class="s1">&#39;test-functional&#39;</span><span class="p">,</span> <span class="ss">:java</span><span class="p">)</span><span class="si">}</span><span class="s2">/**/*.java&quot;</span><span class="o">].</span><span class="n">size</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="n">project</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">compile</span><span class="o">.</span><span class="n">from</span> <span class="n">project</span><span class="o">.</span><span class="n">_</span><span class="p">(</span><span class="ss">:src</span><span class="p">,</span> <span class="s1">&#39;test-functional&#39;</span><span class="p">,</span> <span class="ss">:java</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># make sure project.test.compile.from is updated before the</span>
<span class="c1"># compile extension picks up its value</span>
<span class="n">after_define</span><span class="p">(</span><span class="ss">:compile</span> <span class="o">=&gt;</span> <span class="ss">:functional_test</span><span class="p">)</span>
</code></pre>
</div>
<p>Core extensions provide the following named callbacks: <code>compile</code>, <code>test</code>, <code>build</code>, <code>package</code> and <code>check</code>.</p>
<h2 id="layouts">Using Alternative Layouts</h2>
<p>Buildr follows a common convention for project layouts: Java source files appear in <code>src/main/java</code> and compile to <code>target/classes</code>, resources are copied over from <code>src/main/resources</code> and so forth.  Not all projects follow this convention, so it&#8217;s now possible to specify an alternative project layout.</p>
<p>The default layout is available in <code>Layout.default</code>, and all projects inherit it.  You can set <code>Layout.default</code> to your own layout, or define a project with a given layout (recommended) by setting the <code>:layout</code> property.  Projects inherit the layout from their parent projects.  For example:</p>
<div class="highlight"><pre><code class="ruby"><span class="n">define</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="ss">:layout</span><span class="o">=&gt;</span><span class="n">my_layout</span> <span class="k">do</span>
  <span class="o">.</span><span class="n">.</span><span class="o">.</span>
<span class="k">end</span>
</code></pre>
</div>
<p>A layout is an object that implements the <code>expand</code> method.  The easiest way to define a custom layout is to create a new <code>Layout</code> object and specify mapping between names used by Buildr and actual paths within the project.  For example:</p>
<div class="highlight"><pre><code class="ruby"><span class="n">my_layout</span> <span class="o">=</span> <span class="no">Layout</span><span class="o">.</span><span class="n">new</span>
<span class="n">my_layout</span><span class="o">[</span><span class="ss">:source</span><span class="p">,</span> <span class="ss">:main</span><span class="p">,</span> <span class="ss">:java</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;java&#39;</span>
<span class="n">my_layout</span><span class="o">[</span><span class="ss">:source</span><span class="p">,</span> <span class="ss">:main</span><span class="p">,</span> <span class="ss">:resources</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;resources&#39;</span>
</code></pre>
</div>
<p>Partial expansion also works, so you can specify the above layout using:</p>
<div class="highlight"><pre><code class="ruby"><span class="n">my_layout</span> <span class="o">=</span> <span class="no">Layout</span><span class="o">.</span><span class="n">new</span>
<span class="n">my_layout</span><span class="o">[</span><span class="ss">:source</span><span class="p">,</span> <span class="ss">:main</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</code></pre>
</div>
<p>If you need anything more complex, you can always subclass <code>Layout</code> and add special handling in the <code>expand</code> method, you&#8217;ll find one such example in the <span class="caps">API</span> documentation.</p>
<p>The built-in tasks expand lists of symbols into relative paths, using the following convention:</p>
<table>
	<tr>
		<th>Path                          </th>
		<th>Expands to </th>
	</tr>
	<tr>
		<td> <code>:source, :main, &lt;lang/usage&gt;</code>  </td>
		<td>  Directory containing source files for a given language or usage, for example, <code>:java</code>, <code>:resources</code>, <code>:webapp</code>. </td>
	</tr>
	<tr>
		<td> <code>:source, :test, &lt;lang/usage&gt;</code>  </td>
		<td> Directory containing test files for a given language or usage, for example, <code>:java</code>, <code>:resources</code>. </td>
	</tr>
	<tr>
		<td> <code>:target, :generated</code>           </td>
		<td> Target directory for generated code (typically source code). </td>
	</tr>
	<tr>
		<td> <code>:target, :main, &lt;lang/usage&gt;</code>  </td>
		<td> Target directory for compiled code, for example, <code>:classes</code>, <code>:resources</code>. </td>
	</tr>
	<tr>
		<td> <code>:target, :test, &lt;lang/usage&gt;</code>  </td>
		<td> Target directory for compile test cases, for example, <code>:classes</code>, <code>:resources</code>. </td>
	</tr>
	<tr>
		<td> <code>:reports, &lt;framework/usage&gt;</code>   </td>
		<td> Target directory for generated reports, for example, <code>:junit</code>, <code>:coverage</code>. </td>
	</tr>
</table>
<p>All tasks are encouraged to use the same convention, and whenever possible, we recommend using the project&#8217;s <code>path_to</code> method to expand a list of symbols into a path, or use the appropriate path when available.  For example:</p>
<div class="highlight"><pre><code class="ruby"><span class="n">define</span> <span class="s1">&#39;bad&#39;</span> <span class="k">do</span>
  <span class="c1"># This may not be the real target.</span>
  <span class="nb">puts</span> <span class="s1">&#39;Compiling to &#39;</span> <span class="o">+</span> <span class="n">path_to</span><span class="p">(</span><span class="s1">&#39;target/classes&#39;</span><span class="p">)</span>
  <span class="c1"># This will break with different layouts.</span>
  <span class="n">package</span><span class="p">(</span><span class="ss">:jar</span><span class="p">)</span><span class="o">.</span><span class="n">include</span> <span class="s1">&#39;src/main/etc/*&#39;</span>
<span class="k">end</span>

<span class="n">define</span> <span class="s1">&#39;good&#39;</span> <span class="k">do</span>
  <span class="c1"># This is always the compiler&#39;s target.</span>
  <span class="nb">puts</span> <span class="s1">&#39;Compiling to &#39;</span> <span class="o">+</span> <span class="n">compile</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">to_s</span>
  <span class="c1"># This will work with different layouts.</span>
  <span class="n">package</span><span class="p">(</span><span class="ss">:jar</span><span class="p">)</span><span class="o">.</span><span class="n">include</span> <span class="n">path_to</span><span class="p">(</span><span class="ss">:source</span><span class="p">,</span> <span class="ss">:main</span><span class="p">,</span> <span class="ss">:etc</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)</span>
<span class="k">end</span>
</code></pre>
</div>
      </div>
      <div id='footer'>Copyright &copy; 2007-2010 The Apache Software Foundation</div>
    </div>
  </body>
</html>
